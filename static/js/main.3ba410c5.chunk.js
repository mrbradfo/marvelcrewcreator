(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var r=a(63),n=a(0),s=a.n(n),c=a(7),l=a(6),i=a(9),o=a(10),m=a(13),h=a(12),u=a(14),d=a(15),p=(a(71),a(127)),b=a(131),f=a(111),v=a(20),E=a(123),C=a(124),O=a(128),g=a(129),j=a(122),S=a(29),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={detailModalOpen:!1,addCharacterModalOpen:!1,teamName:""},a.teamSelection=s.a.createRef(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=s.a.createElement(p.a,{shadow:"sm",p:"lg",radius:"md",withBorder:!0},s.a.createElement(p.a.Section,null,s.a.createElement(b.a,{src:this.props.data.thumbnail.path+"."+this.props.data.thumbnail.extension,height:160,alt:"Norway"}),s.a.createElement(f.a,{p:"sm"},s.a.createElement(v.a,null,s.a.createElement("dt",{className:"title"},this.props.title),s.a.createElement("p",null,this.props.data.description))))),a=s.a.createElement(E.a.Item,{className:"accordion",key:"Comics",value:"Comics"},s.a.createElement(E.a.Control,null,"Comics "+this.props.data.comics.available),this.props.data.comics.items.map(function(e,t){return s.a.createElement(E.a.Panel,{key:t},s.a.createElement("li",null,e.name))})),r=s.a.createElement(E.a.Item,{className:"accordion",key:"Series",value:"Series"},s.a.createElement(E.a.Control,null,"Series "+this.props.data.series.available),this.props.data.series.items.map(function(e,t){return s.a.createElement(E.a.Panel,{key:t},s.a.createElement("li",null,e.name))})),n=s.a.createElement(E.a.Item,{className:"accordion",key:"Stories",value:"Stories"},s.a.createElement(E.a.Control,null,"Stories "+this.props.data.stories.available),this.props.data.stories.items.map(function(e,t){return s.a.createElement(E.a.Panel,{key:t},s.a.createElement("li",null,e.name))})),c=s.a.createElement(E.a.Item,{className:"accordion",key:"Events",value:"Events"},s.a.createElement(E.a.Control,null,"Events "+this.props.data.events.available),this.props.data.events.items.map(function(e,t){return s.a.createElement(E.a.Panel,{key:t},s.a.createElement("li",null,e.name))})),l=this.props.data?s.a.createElement(s.a.Fragment,null,t,s.a.createElement(E.a,{chevronPosition:"left",sx:{maxWidth:400},mx:"auto"},a,r,n,c)):s.a.createElement("p",null,"No character data found!"),i=s.a.createElement(C.a,{opened:this.state.detailModalOpen,onClose:function(){return e.setState({detailModalOpen:!1})},title:this.props.title.toUpperCase(),withCloseButton:!0,overlayBlur:4},s.a.createElement("div",{className:"character-details-modal"},l)),o=s.a.createElement(C.a,{opened:this.state.addCharacterModalOpen,onClose:function(){return e.setState({addCharacterModalOpen:!1})},title:this.props.title.toUpperCase(),withCloseButton:!0,overlayBlur:4},s.a.createElement("div",{className:"character-details-modal"},s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"add-selection"},s.a.createElement(O.a,{data:this.props.teams.map(function(e){return e.teamName}),ref:this.teamSelection,label:"Add",description:"Add to a team"}),s.a.createElement(g.a,{className:"create-team-btn",onClick:function(){e.addCharacterToTeam(e.props.data,e.teamSelection.current.value)}},"Add")))));return s.a.createElement(s.a.Fragment,null,s.a.createElement(j.a,{shadow:"md",width:250,position:"right",withArrow:!0,closeDelay:200,closeOnItemClick:!1},s.a.createElement(j.a.Target,null,s.a.createElement("button",{className:"tile"},s.a.createElement("div",{className:"tile-img"},s.a.createElement("img",{src:this.props.image,alt:this.props.title})),s.a.createElement("h2",null,this.props.title))),s.a.createElement(j.a.Dropdown,null,s.a.createElement(j.a.Label,null,this.props.title),s.a.createElement(j.a.Item,{className:"title-menu",icon:s.a.createElement(S.b,{size:25}),onClick:function(){e.showAddToTeamModal()}},"ADD TO TEAM"),s.a.createElement(j.a.Item,{onClick:function(){e.showDetailsModal()},className:"title-menu",icon:s.a.createElement(S.a,{size:14})},"SHOW DETAILS"))),o,i)}},{key:"showDetailsModal",value:function(){this.setState({detailModalOpen:!0})}},{key:"showAddToTeamModal",value:function(){this.props.teams.length>0?this.setState({addCharacterModalOpen:!0}):alert("First create a team over on the right! :) \ud83d\udc49")}},{key:"addCharacterToTeam",value:function(e,t){this.props.addCharacterToTeam(e,t),this.setState({addCharacterModalOpen:!1})}}]),t}(n.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.results.length>0||""===!this.props.searchWord?this.props.results.map(function(t){return s.a.createElement(y,{data:t,teams:e.props.teams,key:t.id,image:t.thumbnail.path+"."+t.thumbnail.extension,title:t.name,addCharacterToTeam:e.props.addCharacterToTeam,onClick:function(){return e.props.onResultClick(t.id)}})}):s.a.createElement("h1",null,this.props.searchWord?'No results found for "'+this.props.searchWord+"\".  Let's try again!":"Search for a character above! \ud83d\udc46");return s.a.createElement("section",{className:"results-list"},t)}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={searchWord:e.searchWord},a.handleSubmit=a.handleSubmit.bind(Object(d.a)(Object(d.a)(a))),a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{className:"search-form",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"text search-label"},"SEARCH"),s.a.createElement("input",{className:"search-bar",type:"text",value:this.state.searchWord,placeholder:"Search for a character to add to your crew!",onChange:this.handleChange,autoFocus:!0}))}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleChange",value:function(e){this.setState({searchWord:e.target.value}),this.props.onSubmit(e.target.value)}}]),t}(n.Component),T=a(78),w=a.n(T),W=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"text"},s.a.createElement("h1",null,'Searching for "'+this.props.searchWord+'".'),s.a.createElement("img",{src:w.a,alt:"loading..."}))}}]),t}(n.Component),M=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(g.a,{className:"more-btn",onClick:this.props.onClick},"Load More")}}]),t}(n.Component),I=a(53),x=a.n(I),D=function(){function e(){Object(i.a)(this,e),this.md5=a(102),this.privateKey="b83fa1c96db4f12d3bd45d3e08b835cfe7b971e8",this.publicKey="75b098ba06029c3b04c914fcbda11b98",this.ts=(new Date).getTime(),this.hash=this.md5(this.ts+this.privateKey+this.publicKey)}return Object(o.a)(e,[{key:"getAuthInfo",value:function(){return{apikey:this.publicKey,hash:this.hash,ts:this.ts}}},{key:"getCharacters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.a)({},e,this.getAuthInfo());return x.a.get("https://gateway.marvel.com:443/v1/public/characters",{params:t}).then(function(e){return e.data.data})}},{key:"getCharacter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(c.a)({},t,this.getAuthInfo()),r="https://gateway.marvel.com:443/v1/public/characters/"+e;return x.a.get(r,{params:a}).then(function(e){return e.data.data})}}]),e}(),A=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"error"},s.a.createElement("h1",null,"Whoops, something went wrong!"))}}]),t}(n.Component),L=a(121),F=a(125),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={modalOpen:!1,newTeamName:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{opened:this.state.modalOpen,onClose:function(){return e.setState({modalOpen:!1})},title:this.props.title,closeOnClickOutside:!1,withCloseButton:!0,overlayBlur:4},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(L.a,{mt:"md",placeholder:"Team Name",onChange:function(t){return e.setState({newTeamName:t.currentTarget.value})},"data-autofocus":!0}),s.a.createElement(g.a,{className:"create-team-btn",onClick:function(){e.createTeam()},type:"submit"},"Create"))),s.a.createElement(F.a,{label:"Create A new Team"},s.a.createElement(g.a,{className:"create-team-btn",onClick:function(){return e.setState({modalOpen:!0})}},"Create a new team")))}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"createTeam",value:function(){var e=this;this.props.currentTeams.findIndex(function(t){return t.teamName===e.state.newTeamName})>=0?alert("a team with the name '"+this.state.newTeamName+"' already exists!"):""===this.state.newTeamName?alert("Name can not be empty! :)"):(this.props.onCreateClick(this.state.newTeamName),this.setState({modalOpen:!1}),this.setState({newTeamName:""}))}}]),t}(n.Component),B=a(3),P=a(108),J=a(126),z=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.teams?s.a.createElement(E.a,{chevronPosition:"left",sx:{maxWidth:400},mx:"auto"},this.props.teams.map(function(t,a){return s.a.createElement(E.a.Item,{className:"accordion",key:a.toString(),value:t.teamName+"-item"},s.a.createElement(B.a,{sx:{display:"flex",alignItems:"center"}},s.a.createElement(E.a.Control,null,t.teamName),s.a.createElement(P.a,{onClick:function(){e.onDeleteTeamClicked(a)},size:"lg"},s.a.createElement(S.c,{size:16}))),t.characters.length>0?t.characters.map(function(t,r){return s.a.createElement(E.a.Panel,{key:r},s.a.createElement("div",{className:"character-list-item"},s.a.createElement(J.a,{src:t.thumbnail.path+"."+t.thumbnail.extension,alt:"it's me"}),s.a.createElement("div",null,t.name),s.a.createElement(P.a,{onClick:function(){e.onDeleteCharacterClicked(t.id,a)},size:"lg"},s.a.createElement(S.c,{size:16}))))}):s.a.createElement(E.a.Panel,null," ",s.a.createElement("span",{role:"img","aria-label":"point-left"},"\ud83d\udc48")," Search and select a character to add to this team! ",s.a.createElement("span",{role:"img","aria-label":"search"},"\ud83d\udd0e")))})):s.a.createElement("div",{className:"no-teams"},"Create a team above! ",s.a.createElement("span",{role:"img","aria-label":"point-up"},"\ud83d\udc46")," ");return s.a.createElement(s.a.Fragment,null,t)}},{key:"onDeleteTeamClicked",value:function(e){this.props.onDeleteTeamClicked(e)}},{key:"onDeleteCharacterClicked",value:function(e,t){this.props.onDeleteCharacterClicked(e,t)}}]),t}(n.Component),K=a(79),U=a.n(K);function H(){var e=localStorage.getItem("teams");return JSON.parse(e)||[]}var V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).debouncedSearch=U.a.debounce(function(){this.getCharacters()},500),a.getCharacters=function(){a.marvelService.getCharacters({nameStartsWith:a.state.searchWord}).then(function(e){a.setState({results:e.results,canLoadMore:e.total>e.offset+e.count,isLoading:!1})}).catch(function(e){console.error(e),a.setState({hasError:!0})})},a.getCharacter=function(e){a.marvelService.getCharacter(e).then(function(e){a.setState({selectedResult:e.results[0]})}).catch(function(e){console.error(e),a.setState({hasError:!0})})},a.getMoreCharacters=function(){a.marvelService.getCharacters({nameStartsWith:a.state.searchWord,offset:a.state.results.length}).then(function(e){a.setState({results:[].concat(Object(l.a)(a.state.results),Object(l.a)(e.results)),canLoadMore:e.total>e.offset+e.count})}).catch(function(e){console.error(e),a.setState({hasError:!0})})},a.state={searchWord:"",results:[],canLoadMore:!1,selectedResult:null,teams:H()},a.marvelService=new D,a.addNewTeam=a.addNewTeam.bind(Object(d.a)(Object(d.a)(a))),a.removeTeam=a.removeTeam.bind(Object(d.a)(Object(d.a)(a))),a.addCharacterToTeam=a.addCharacterToTeam.bind(Object(d.a)(Object(d.a)(a))),a.removeCharacterFromTeam=a.removeCharacterFromTeam.bind(Object(d.a)(Object(d.a)(a))),a.getCharacters=a.getCharacters.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.hasError?s.a.createElement(A,null):this.state.isLoading?s.a.createElement(W,{searchWord:this.state.searchWord}):s.a.createElement(N,{results:this.state.results,teams:this.state.teams,searchWord:this.state.searchWord,onResultClick:this.getCharacter,addCharacterToTeam:this.addCharacterToTeam}),a=this.state.canLoadMore?s.a.createElement(M,{onClick:this.getMoreCharacters}):"",r=s.a.createElement(z,{teams:this.state.teams,onDeleteTeamClicked:this.removeTeam,onDeleteCharacterClicked:this.removeCharacterFromTeam});return s.a.createElement("section",{className:"app"},s.a.createElement("h2",{className:"text title"},"MARVEL CREW BUILDER"),s.a.createElement(k,{className:"search-bar",searchWord:this.state.searchWord,onSubmit:function(t){return e.setState({searchWord:t})}}),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"left"},s.a.createElement("div",{className:"search-result-grid"},t,a)),s.a.createElement("div",{className:"right"},s.a.createElement("div",{className:"created-teams-list"},s.a.createElement("div",{className:"text team-title"},"YOUR TEAMS"),s.a.createElement(R,{className:"create-btn",title:"Choose a team name",onCreateClick:this.addNewTeam,currentTeams:this.state.teams}),s.a.createElement("div",{className:"current-teams-list"},r)))))}},{key:"componentDidUpdate",value:function(e,t,a){var r=this.state.searchWord,n=t.searchWord;this.state.results.length>0&&""===r&&this.setState({results:[],canLoadMore:!1}),r&&r!==n&&(this.setState({isLoading:!0}),this.debouncedSearch())}},{key:"addNewTeam",value:function(e){console.log("adding team "+e);var t={teamName:e,characters:[]};this.setState({teams:[].concat(Object(l.a)(this.state.teams),[t])}),localStorage.setItem("teams",JSON.stringify([].concat(Object(l.a)(this.state.teams),[t])))}},{key:"removeTeam",value:function(e){console.log("removing team "+this.state.teams[e].teamName);var t=Object(l.a)(this.state.teams);t.splice(e,1),this.setState({teams:Object(l.a)(t)}),localStorage.setItem("teams",JSON.stringify(Object(l.a)(t)))}},{key:"removeCharacterFromTeam",value:function(e,t){console.log("removing character "+e+" from team "+this.state.teams[t].teamName);var a=this.state.teams[t],r=a.characters.findIndex(function(t){return t.id===e});a.characters.splice(r,1),this.setState(Object(c.a)({},this.state.teams[t],{characters:Object(l.a)(a.characters)})),localStorage.setItem("teams",JSON.stringify(this.state.teams))}},{key:"addCharacterToTeam",value:function(e,t){console.log("adding "+e.name+" to team "+t);var a=this.state.teams.findIndex(function(e){return e.teamName===t}),r=Object(l.a)(this.state.teams);r[a].characters.push(e),this.setState({teams:Object(l.a)(r)}),localStorage.setItem("teams",JSON.stringify(Object(l.a)(r)))}}]),t}(n.Component),Y=(a(104),document.getElementById("root"));Object(r.createRoot)(Y).render(s.a.createElement(V,null))},64:function(e,t,a){e.exports=a(106)},71:function(e,t,a){},78:function(e,t,a){e.exports=a.p+"static/media/marvel_loader.e65ca722.gif"}},[[64,2,1]]]);
//# sourceMappingURL=main.3ba410c5.chunk.js.map